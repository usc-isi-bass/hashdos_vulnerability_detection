#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>

#define FNV_PRIME_32 16777619
#define FNV_OFFSET_32 2166136261U

unsigned int __attribute__ ((noinline)) FNVHash(const char* str, unsigned int length)
{
    unsigned int hash = FNV_OFFSET_32, i;
    for(i = 0; i < length; i++)
    {
        hash = hash ^ toupper(str[i]); // xor next byte into the bottom of the hash
        hash = hash * FNV_PRIME_32; // Multiply by prime number found to work well
    }
    return hash;
} 


int main(int argc, char *argv[])
{
	const char *key;
	unsigned int len;
	unsigned int h;
	if (argc < 2) {
		fprintf(stderr, "usage: %s <key>\n", argv[0]);
		return EXIT_SUCCESS;
	}
	key = argv[1];
	len = strlen(key);

    h = FNVHash(key, len);
	printf("h(%s) = %u\n", key, h);

	return EXIT_SUCCESS;
}
